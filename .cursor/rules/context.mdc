---
description: hoconfmt project context and conventions
globs:
alwaysApply: true
---

# hoconfmt Project

An opinionated HOCON (Human-Optimized Config Object Notation) formatter.

## Philosophy

- Zero-config, like standard.js
- No configuration options - one way to format
- Opinionated formatting rules

## Public API

```typescript
function check(input: string): boolean  // Returns true if already formatted
function format(input: string): string  // Returns formatted HOCON string
```

## Formatting Rules

| Rule | Value |
|------|-------|
| Indentation | 2 spaces |
| Key-value separator | ` = ` (equals with spaces) |
| Brace style | Same line (`key = {`) |
| Comments | Normalize to `//` |
| Trailing whitespace | Remove |
| Blank lines | Collapse multiple to single |
| EOF | Single newline |
| Strings | Double quotes |
| Include order | Preserve original |
| Key alignment | No alignment |
| Arrays | Smart (single line if < 80 chars, multi-line otherwise) |

## Project Structure

```
hoconfmt/
├── src/
│   ├── types.ts      # TypeScript interfaces
│   ├── lexer.ts      # Tokenizer
│   ├── parser.ts     # AST builder
│   ├── formatter.ts  # Formatting logic
│   ├── index.ts      # Public API
│   └── cli.ts        # CLI interface
├── test/             # Vitest tests
├── resource/         # Test HOCON files
├── bin/              # CLI binary
└── dist/             # Build output (ESM, CJS, UMD)
```

## CLI Usage

```bash
hoconfmt file.conf           # Check single file
hoconfmt "src/**/*.conf"     # Check with glob
hoconfmt --check src/        # Check directory
hoconfmt --version           # Show version
hoconfmt --help              # Show help
```

## Technology Stack

- TypeScript
- Vitest for testing
- esbuild for bundling
- semantic-release for versioning
